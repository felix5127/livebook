# Livebook MVP - AI éŸ³é¢‘è½¬å†™å·¥å…·

åŸºäºé˜¿é‡Œäº‘ Paraformer-v2 çš„æ™ºèƒ½éŸ³é¢‘è½¬å†™å·¥å…·ï¼Œæ”¯æŒè¯´è¯äººåˆ†ç¦»å’Œå¤šè¯­è¨€è¯†åˆ«ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½è½¬å†™**: ä½¿ç”¨é˜¿é‡Œäº‘ Paraformer-v2 æ¨¡å‹ï¼Œæ”¯æŒä¸­è‹±æ··åˆè¯†åˆ«
- **è¯´è¯äººåˆ†ç¦»**: è‡ªåŠ¨è¯†åˆ«ä¸åŒè¯´è¯äººï¼Œå½©è‰²æ ‡è®°åŒºåˆ†
- **å®æ—¶è¿›åº¦**: ä¸Šä¼ å’Œå¤„ç†è¿›åº¦å®æ—¶æ˜¾ç¤º
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒ MP3, WAV, M4A, MP4, MOV ç­‰æ ¼å¼
- **é“¾æ¥å¯¼å…¥**: æ”¯æŒ YouTube å’Œ Bç«™ è§†é¢‘é“¾æ¥
- **ç¼–è¾‘åŠŸèƒ½**: æ”¯æŒè½¬å†™ç»“æœçš„æŸ¥æ‰¾æ›¿æ¢å’Œæ‰‹åŠ¨ç¼–è¾‘
- **å¤šæ ¼å¼å¯¼å‡º**: æ”¯æŒ TXT, SRT, JSON æ ¼å¼å¯¼å‡º
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ï¼Œæ·±è‰²æ¨¡å¼

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 14 + TypeScript + Tailwind CSS
- **åç«¯**: Next.js API Routes
- **æ•°æ®åº“**: Supabase PostgreSQL
- **å­˜å‚¨**: Supabase Storage
- **AI API**: é˜¿é‡Œäº‘ DashScope Paraformer-v2
- **éƒ¨ç½²**: Vercel

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <é¡¹ç›®åœ°å€>
cd livebook-mvp
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š

```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹é…ç½®ï¼š

```env
# é˜¿é‡Œäº‘ DashScope API Key (å¿…éœ€)
DASHSCOPE_API_KEY=your-dashscope-api-key

# Supabase é…ç½® (å¿…éœ€)
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
```

### 4. é…ç½® Supabase

1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š

```bash
npx supabase db push
```

3. é…ç½®å­˜å‚¨æ¡¶ï¼ˆç”¨äºéŸ³é¢‘æ–‡ä»¶å­˜å‚¨ï¼‰

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æ‰“å¼€ [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“‹ API å¯†é’¥è·å–

### é˜¿é‡Œäº‘ DashScope API Key

1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°](https://dashscope.console.aliyun.com/)
2. ç™»å½•å¹¶å¼€é€šæœåŠ¡
3. åˆ›å»º API Keyï¼ˆé€‰æ‹©åŒ—äº¬åŒºåŸŸï¼‰
4. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿä½™é¢æˆ–å…è´¹é¢åº¦

### Supabase é…ç½®

1. åœ¨ [Supabase Dashboard](https://app.supabase.com) åˆ›å»ºé¡¹ç›®
2. ä»é¡¹ç›®è®¾ç½®ä¸­è·å–ï¼š
   - Project URL
   - Anon Key  
   - Service Role Key

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
livebook-mvp/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ upload/        # æ–‡ä»¶ä¸Šä¼ æ¥å£
â”‚   â”‚   â”œâ”€â”€ transcribe/    # è½¬å†™ä»»åŠ¡æäº¤
â”‚   â”‚   â””â”€â”€ tasks/[id]/    # ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢
â”‚   â”œâ”€â”€ result/[id]/       # ç»“æœå±•ç¤ºé¡µé¢
â”‚   â””â”€â”€ page.tsx           # é¦–é¡µ
â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”œâ”€â”€ FileUploader.tsx   # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”œâ”€â”€ TranscriptViewer.tsx # è½¬å†™ç»“æœæŸ¥çœ‹
â”‚   â””â”€â”€ TaskProgress.tsx   # è¿›åº¦æ˜¾ç¤º
â”œâ”€â”€ lib/                   # å·¥å…·åº“
â”‚   â”œâ”€â”€ dashscope.ts      # é˜¿é‡Œäº‘ API å°è£…
â”‚   â”œâ”€â”€ supabase.ts       # Supabase å®¢æˆ·ç«¯
â”‚   â””â”€â”€ utils.ts          # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â””â”€â”€ supabase/             # Supabase é…ç½®
    â”œâ”€â”€ migrations/       # æ•°æ®åº“è¿ç§»
    â””â”€â”€ functions/        # Edge Functions
```

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### 1. ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶

- æ”¯æŒæ‹–æ‹½ä¸Šä¼ æˆ–ç‚¹å‡»é€‰æ‹©
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼š30MB
- æ”¯æŒæ ¼å¼ï¼šMP3, WAV, M4A, MP4, MOV

### 2. é“¾æ¥å¯¼å…¥

- ç²˜è´´ YouTube æˆ– Bç«™ è§†é¢‘é“¾æ¥
- ç³»ç»Ÿè‡ªåŠ¨æå–éŸ³é¢‘è¿›è¡Œè½¬å†™

### 3. æŸ¥çœ‹ç»“æœ

- è‡ªåŠ¨è¯´è¯äººåˆ†ç¦»å’Œé¢œè‰²æ ‡è®°
- æ”¯æŒæŒ‰æ—¶é—´æˆ³è·³è½¬æ’­æ”¾
- å¯æœç´¢å’Œè¿‡æ»¤è½¬å†™å†…å®¹

### 4. ç¼–è¾‘å’Œå¯¼å‡º

- æ”¯æŒæ–‡æœ¬æŸ¥æ‰¾æ›¿æ¢
- å¯æ‰‹åŠ¨ç¼–è¾‘è½¬å†™å†…å®¹
- å¯¼å‡ºä¸º TXT/SRT/JSON æ ¼å¼

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# ä»£ç æ£€æŸ¥
npm run lint

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ•°æ®åº“æ“ä½œ
npm run db:push      # æ¨é€æ•°æ®åº“å˜æ›´
npm run db:reset     # é‡ç½®æ•°æ®åº“
```

## ğŸ“ API æ–‡æ¡£

### POST /api/upload

ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶åˆ°å­˜å‚¨æ¡¶

**è¯·æ±‚ä½“**:
```json
{
  "file": "Fileå¯¹è±¡"
}
```

**å“åº”**:
```json
{
  "success": true,
  "fileUrl": "https://...",
  "fileName": "audio.mp3"
}
```

### POST /api/transcribe

æäº¤è½¬å†™ä»»åŠ¡

**è¯·æ±‚ä½“**:
```json
{
  "fileUrl": "https://...",
  "fileName": "audio.mp3",
  "speakerCount": 2,
  "languageHints": ["zh", "en"]
}
```

**å“åº”**:
```json
{
  "success": true,
  "taskId": "task_123",
  "noteId": "note_456"
}
```

### GET /api/tasks/[id]

æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€

**å“åº”**:
```json
{
  "success": true,
  "task": {
    "id": "task_123",
    "status": "completed",
    "progress": 100,
    "result": { ... }
  }
}
```

## ğŸš€ éƒ¨ç½²

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. è¿æ¥ GitHub ä»“åº“åˆ° Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. éƒ¨ç½²

### æ‰‹åŠ¨éƒ¨ç½²

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API Key å®‰å…¨**: è¯·å‹¿åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æš´éœ² API Key
2. **æ–‡ä»¶å¤§å°**: å»ºè®®éŸ³é¢‘æ–‡ä»¶ä¸è¶…è¿‡ 30MB
3. **åœ°åŸŸé™åˆ¶**: DashScope API éœ€è¦ä½¿ç”¨åŒ—äº¬åŒºåŸŸçš„ Key
4. **ç½‘ç»œè¦æ±‚**: ç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—®é˜¿é‡Œäº‘å’Œ Supabase

## ğŸ› å¸¸è§é—®é¢˜

### 1. API è°ƒç”¨å¤±è´¥

- æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ API Key å¯¹åº”çš„åŒºåŸŸæ˜¯åŒ—äº¬
- æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³

### 2. æ–‡ä»¶ä¸Šä¼ å¤±è´¥

- æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
- ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡é™åˆ¶
- æ£€æŸ¥ Supabase å­˜å‚¨é…ç½®

### 3. è½¬å†™ç»“æœä¸ºç©º

- ç¡®è®¤éŸ³é¢‘æ–‡ä»¶åŒ…å«æ¸…æ™°çš„è¯­éŸ³å†…å®¹
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸå
- å°è¯•é‡æ–°æäº¤ä»»åŠ¡

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š[your-email@example.com]